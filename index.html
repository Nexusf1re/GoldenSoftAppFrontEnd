<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="resources/style.css" />
    <link
      href="https://fonts.googleapis.com/css?family=JetBrains Mono"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="icon" href="resources/Golden-Soft.png" />
    <title>Despesas Golden Soft</title>
  </head>


  <body>
    
    <div class="box" tabindex="0">
      <form id="expenseForm">
          <div id="image"><img src="https://paogoldensoft.com.br/wp-content/uploads/2024/02/cropped-Sem-nome-500-x-500-px-192x192.png" alt=""></div>
          <legend>
            <b style="color: rgb(0, 0, 0);">Despesas</b>
          </legend>
          <br />
          <br />
          <div class="inputBox" id="valor">
            <label id="valorout" class="labelInput">R$</label>
            <input
              id="valorinn"
              autocomplete="off"
              type="number"
              max="100000000.00"
              onkeypress="return event.charCode != 32"
              step="0.01"
              name="valor"
              class="inputUser"
              required
            />
            <label id="valorin" for="valor" class="labelInput">Valor:</label>
          </div>
          <br />
          <br />
          <div class="inputBox">
            <label for="tipo">Vendedor</label>
            <select class="selects" name="tipo" id="tipo" required>
              <option disabled selected value>Selecionar</option>
              <option value="John">JOHN</option>
              <option value="Eduardo">EDUARDO</option>
              <option value="JulioGilson">JULIO GILSON</option>
              <option value="Antonio">ANTONIO</option>
              <option value="Juliane">JULIANE</option>
              <option value="Rodolfo">RODOLFO</option>
              <option value="Miron">MIRON</option>
              <option value="Weverton">WEVERTON</option>
              <option value="Rede">REDE</option>
              <option value="Func">FUNC</option>
              <option value="Geral">GERAL</option>
            </select>
          </div>

          <br />
          <div class="inputBox">
            <label for="pgto">Movimentação</label>
            <select class="selects" name="pgto" id="pgto" required>
              <option disabled selected value>Selecionar</option>
              <option value="AjudaCusto">AJUDA CUSTO</option>
              <option value="Ajudante">AJUDANTE</option>
              <option value="Almoco">ALMOÇO</option>
              <option value="Borracharia">BORRACHARIA</option>
              <option value="Combustivel">COMBUSTÍVEL</option>
              <option value="Hotel">HOTEL</option>
              <option value="Janta">JANTA</option>
              <option value="MObraMant">M. OBRA MANT.</option>
              <option value="TrocaOleo">TROCA OLÉO</option>
              <option value="Oficina">OFICINA</option>
              <option value="PecaVeiculo">PEÇA VEÍCULO</option>
              <option value="PedagioUber">PEDÁGIO - UBER</option>
              <option value="Pneu">PNEU</option>
              <option value="Vistoria">VISTORIA</option>
            </select>
          </div>

          <br />
          <div class="inputBox">
            <label for="data"><b>Data</b></label>
            <input
              class="selects"
              style="border-radius: 18px"
              type="date"
              name="data"
              id="data"
              required
            />
          </div>
          <br />

          <input type="submit" name="submit" id="submit" value="Enviar" />

          <p class="exit">
            <a style="color: white" href="config/logout.php">Sair</a>
          </p>
        </fieldset>
      </form>
    </div>

    <script>
      document
        .getElementById("expenseForm")
        .addEventListener("submit", async (event) => {
          event.preventDefault(); // Impede o envio padrão do formulário

          const nome = document.getElementById("tipo").value;
          const valor = document.getElementById("valorinn").value;
          const descricao = document.getElementById("pgto").value;
          const data = document.getElementById("data").value;

          // Atualize a URL para apontar para o seu aplicativo Vercel
          const response = await fetch(
            "https://golden-soft-app-back-end.vercel.app/inserir",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ nome, valor, descricao, data }),
            }
          );

          if (response.ok) {
            const message = await response.text();
            alert(message);
            // Limpa o formulário após envio
            document.getElementById("expenseForm").reset();
          } else {
            const errorMessage = await response.text();
            alert(`Erro ao enviar os dados: ${errorMessage}`);
          }
        });
    </script>
  </body>
</html>
